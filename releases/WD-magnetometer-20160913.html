<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>Magnetometer Sensor</title>
  <meta content="WD" name="w3c-status">
  <link href="https://www.w3.org/StyleSheets/TR/2016/W3C-WD" rel="stylesheet">
  <link href="https://www.w3.org/2008/site/images/favicon.ico" rel="icon">
  <meta content="Bikeshed 1.0.0" name="generator">
<style>/* style-md-lists */

            /* This is a weird hack for me not yet following the commonmark spec
               regarding paragraph and lists. */
            [data-md] > :first-child {
                margin-top: 0;
            }
            [data-md] > :last-child {
                margin-bottom: 0;
            }</style>
<style>/* style-selflinks */

            .heading, .issue, .note, .example, li, dt {
                position: relative;
            }
            a.self-link {
                position: absolute;
                top: 0;
                left: calc(-1 * (3.5rem - 26px));
                width: calc(3.5rem - 26px);
                height: 2em;
                text-align: center;
                border: none;
                transition: opacity .2s;
                opacity: .5;
            }
            a.self-link:hover {
                opacity: 1;
            }
            .heading > a.self-link {
                font-size: 83%;
            }
            li > a.self-link {
                left: calc(-1 * (3.5rem - 26px) - 2em);
            }
            dfn > a.self-link {
                top: auto;
                left: auto;
                opacity: 0;
                width: 1.5em;
                height: 1.5em;
                background: gray;
                color: white;
                font-style: normal;
                transition: opacity .2s, background-color .2s, color .2s;
            }
            dfn:hover > a.self-link {
                opacity: 1;
            }
            dfn > a.self-link:hover {
                color: black;
            }

            a.self-link::before            { content: "¶"; }
            .heading > a.self-link::before { content: "§"; }
            dfn > a.self-link::before      { content: "#"; }</style>
<style>/* style-counters */

            body {
                counter-reset: example figure issue;
            }
            .issue {
                counter-increment: issue;
            }
            .issue:not(.no-marker)::before {
                content: "Issue " counter(issue);
            }

            .example {
                counter-increment: example;
            }
            .example:not(.no-marker)::before {
                content: "Example " counter(example);
            }
            .invalid.example:not(.no-marker)::before,
            .illegal.example:not(.no-marker)::before {
                content: "Invalid Example" counter(example);
            }

            figcaption {
                counter-increment: figure;
            }
            figcaption:not(.no-marker)::before {
                content: "Figure " counter(figure) " ";
            }</style>
<style>/* style-autolinks */

            .css.css, .property.property, .descriptor.descriptor {
                color: #005a9c;
                font-size: inherit;
                font-family: inherit;
            }
            .css::before, .property::before, .descriptor::before {
                content: "‘";
            }
            .css::after, .property::after, .descriptor::after {
                content: "’";
            }
            .property, .descriptor {
                /* Don't wrap property and descriptor names */
                white-space: nowrap;
            }
            .type { /* CSS value <type> */
                font-style: italic;
            }
            pre .property::before, pre .property::after {
                content: "";
            }
            [data-link-type="property"]::before,
            [data-link-type="propdesc"]::before,
            [data-link-type="descriptor"]::before,
            [data-link-type="value"]::before,
            [data-link-type="function"]::before,
            [data-link-type="at-rule"]::before,
            [data-link-type="selector"]::before,
            [data-link-type="maybe"]::before {
                content: "‘";
            }
            [data-link-type="property"]::after,
            [data-link-type="propdesc"]::after,
            [data-link-type="descriptor"]::after,
            [data-link-type="value"]::after,
            [data-link-type="function"]::after,
            [data-link-type="at-rule"]::after,
            [data-link-type="selector"]::after,
            [data-link-type="maybe"]::after {
                content: "’";
            }

            [data-link-type].production::before,
            [data-link-type].production::after,
            .prod [data-link-type]::before,
            .prod [data-link-type]::after {
                content: "";
            }

            [data-link-type=element],
            [data-link-type=element-attr] {
                font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
                font-size: .9em;
            }
            [data-link-type=element]::before { content: "<" }
            [data-link-type=element]::after  { content: ">" }

            [data-link-type=biblio] {
                white-space: pre;
            }</style>
<style>/* style-dfn-panel */

        .dfn-panel {
            position: absolute;
            z-index: 35;
            height: auto;
            width: -webkit-fit-content;
            width: fit-content;
            max-width: 300px;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: #DDDDDD;
            color: black;
            border: outset 0.2em;
        }
        .dfn-panel:not(.on) { display: none; }
        .dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
        .dfn-panel > b { display: block; }
        .dfn-panel a { color: black; }
        .dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
        .dfn-panel > b + b { margin-top: 0.25em; }
        .dfn-panel ul { padding: 0; }
        .dfn-panel li { list-style: inside; }
        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: .5em;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
        }

        .dfn-paneled { cursor: pointer; }
        </style>
<style>/* style-syntax-highlighting */
pre.idl.highlight { color: #708090; }
        .highlight:not(.idl) { background: hsl(24, 20%, 95%); }
        code.highlight { padding: .1em; border-radius: .3em; }
        pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }
        .highlight .c { color: #708090 } /* Comment */
        .highlight .k { color: #990055 } /* Keyword */
        .highlight .l { color: #000000 } /* Literal */
        .highlight .n { color: #0077aa } /* Name */
        .highlight .o { color: #999999 } /* Operator */
        .highlight .p { color: #999999 } /* Punctuation */
        .highlight .cm { color: #708090 } /* Comment.Multiline */
        .highlight .cp { color: #708090 } /* Comment.Preproc */
        .highlight .c1 { color: #708090 } /* Comment.Single */
        .highlight .cs { color: #708090 } /* Comment.Special */
        .highlight .kc { color: #990055 } /* Keyword.Constant */
        .highlight .kd { color: #990055 } /* Keyword.Declaration */
        .highlight .kn { color: #990055 } /* Keyword.Namespace */
        .highlight .kp { color: #990055 } /* Keyword.Pseudo */
        .highlight .kr { color: #990055 } /* Keyword.Reserved */
        .highlight .kt { color: #990055 } /* Keyword.Type */
        .highlight .ld { color: #000000 } /* Literal.Date */
        .highlight .m { color: #000000 } /* Literal.Number */
        .highlight .s { color: #a67f59 } /* Literal.String */
        .highlight .na { color: #0077aa } /* Name.Attribute */
        .highlight .nc { color: #0077aa } /* Name.Class */
        .highlight .no { color: #0077aa } /* Name.Constant */
        .highlight .nd { color: #0077aa } /* Name.Decorator */
        .highlight .ni { color: #0077aa } /* Name.Entity */
        .highlight .ne { color: #0077aa } /* Name.Exception */
        .highlight .nf { color: #0077aa } /* Name.Function */
        .highlight .nl { color: #0077aa } /* Name.Label */
        .highlight .nn { color: #0077aa } /* Name.Namespace */
        .highlight .py { color: #0077aa } /* Name.Property */
        .highlight .nt { color: #669900 } /* Name.Tag */
        .highlight .nv { color: #222222 } /* Name.Variable */
        .highlight .ow { color: #999999 } /* Operator.Word */
        .highlight .mb { color: #000000 } /* Literal.Number.Bin */
        .highlight .mf { color: #000000 } /* Literal.Number.Float */
        .highlight .mh { color: #000000 } /* Literal.Number.Hex */
        .highlight .mi { color: #000000 } /* Literal.Number.Integer */
        .highlight .mo { color: #000000 } /* Literal.Number.Oct */
        .highlight .sb { color: #a67f59 } /* Literal.String.Backtick */
        .highlight .sc { color: #a67f59 } /* Literal.String.Char */
        .highlight .sd { color: #a67f59 } /* Literal.String.Doc */
        .highlight .s2 { color: #a67f59 } /* Literal.String.Double */
        .highlight .se { color: #a67f59 } /* Literal.String.Escape */
        .highlight .sh { color: #a67f59 } /* Literal.String.Heredoc */
        .highlight .si { color: #a67f59 } /* Literal.String.Interpol */
        .highlight .sx { color: #a67f59 } /* Literal.String.Other */
        .highlight .sr { color: #a67f59 } /* Literal.String.Regex */
        .highlight .s1 { color: #a67f59 } /* Literal.String.Single */
        .highlight .ss { color: #a67f59 } /* Literal.String.Symbol */
        .highlight .vc { color: #0077aa } /* Name.Variable.Class */
        .highlight .vg { color: #0077aa } /* Name.Variable.Global */
        .highlight .vi { color: #0077aa } /* Name.Variable.Instance */
        .highlight .il { color: #000000 } /* Literal.Number.Integer.Long */
        </style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">Magnetometer Sensor</h1>
   <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">W3C First Public Working Draft, <time class="dt-updated" datetime="2016-09-13">13 September 2016</time></span></h2>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://www.w3.org/TR/2016/WD-magnetometer-20160913/">https://www.w3.org/TR/2016/WD-magnetometer-20160913/</a>
     <dt>Latest published version:
     <dd><a href="https://www.w3.org/TR/magnetometer/">https://www.w3.org/TR/magnetometer/</a>
     <dt>Editor's Draft:
     <dd><a href="https://w3c.github.io/magnetometer/">https://w3c.github.io/magnetometer/</a>
     <dt>Version History:
     <dd><a href="https://github.com/w3c/magnetometer/commits/gh-pages/index.bs">https://github.com/w3c/magnetometer/commits/gh-pages/index.bs</a>
     <dt>Feedback:
     <dd><span><a href="mailto:public-device-apis@w3.org?subject=%5Bmagnetometer%5D%20YOUR%20TOPIC%20HERE">public-device-apis@w3.org</a> with subject line “<kbd>[magnetometer] <i data-lt="">… message topic …</i></kbd>” (<a href="https://lists.w3.org/Archives/Public/public-device-apis/" rel="discussion">archives</a>)</span>
     <dt>Issue Tracking:
     <dd><a href="https://github.com/w3c/magnetometer/issues/">GitHub</a>
     <dt class="editor">Editors:
     <dd class="editor p-author h-card vcard" data-editor-id="41974"><a class="p-name fn u-url url" href="https://intel.com/">Anssi Kostiainen</a> (<span class="p-org org">Intel Corporation</span>)
     <dd class="editor p-author h-card vcard" data-editor-id="80407"><a class="p-name fn u-url url" href="https://intel.com/">Rijubrata Bhaumik</a> (<span class="p-org org">Intel Corporation</span>)
     <dt>Bug Reports:
     <dd><span><a href="https://www.github.com/w3c/magnetometer/issues/new">via the w3c/magnetometer repository on GitHub</a></span>
     <dt>Test Suite:
     <dd><span><a href="https://github.com/w3c/web-platform-tests/tree/master/magnetometer">web-platform-tests on GitHub</a></span>
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2016 <a href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href="http://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>). W3C <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document">permissive document license</a> rules apply. </p>
   <hr title="Separator for header">
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
  <div class="p-summary" data-fill-with="abstract">
   <p>This specification defines a concrete sensor interface to measure magnetic

field in the X, Y and Z axis.</p>
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> <em>This section describes the status of this document at the time of
  its publication. Other documents may supersede this document. A list of
  current W3C publications and the latest revision of this technical report
  can be found in the <a href="https://www.w3.org/TR/">W3C technical reports
  index at https://www.w3.org/TR/.</a></em> </p>
   <p> This document was published by the <a href="https://www.w3.org/2009/dap/">Device and Sensors Working Group</a> as a Working Draft. This document is intended to become a W3C Recommendation. </p>
   <p> If you wish to make comments regarding this document, please send them to <a href="mailto:public-device-apis@w3.org?Subject=%5Bmagnetometer%5D%20PUT%20SUBJECT%20HERE">public-device-apis@w3.org</a> (<a href="mailto:public-device-apis-request@w3.org?subject=subscribe">subscribe</a>, <a href="http://lists.w3.org/Archives/Public/public-device-apis/">archives</a>).
	When sending e-mail,
	please put the text “magnetometer” in the subject,
	preferably like this:
	“[magnetometer] <em>…summary of comment…</em>”.
	All comments are welcome. </p>
   <p> This document is a <strong>First Public Working Draft</strong>. </p>
   <p> Publication as a First Public Working Draft does not imply endorsement by the W3C
  Membership. This is a draft document and may be updated, replaced or
  obsoleted by other documents at any time. It is inappropriate to cite this
  document as other than work in progress. </p>
   <p> This document was produced by a group operating under
	the <a href="https://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 W3C Patent Policy</a>.
	W3C maintains a <a href="https://www.w3.org/2004/01/pp-impl/43696/status" rel="disclosure">public list of any patent disclosures</a> made in connection with the deliverables of the group;
	that page also includes instructions for disclosing a patent.
	An individual who has actual knowledge of a patent which the individual believes contains <a href="https://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential Claim(s)</a> must disclose the information in accordance with <a href="https://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 6 of the W3C Patent Policy</a>. </p>
   <p> This document is governed by the <a href="https://www.w3.org/2015/Process-20150901/" id="w3c_process_revision">1 September 2015 W3C Process Document</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#intro"><span class="secno">1</span> <span class="content">Introduction</span></a>
    <li><a href="#examples"><span class="secno">2</span> <span class="content">Examples</span></a>
    <li><a href="#security-and-privacy"><span class="secno">3</span> <span class="content">Security and Privacy Considerations</span></a>
    <li><a href="#model"><span class="secno">4</span> <span class="content">Model</span></a>
    <li>
     <a href="#api"><span class="secno">5</span> <span class="content">API</span></a>
     <ol class="toc">
      <li><a href="#magnetometer-sensor-interface"><span class="secno">5.1</span> <span class="content">The MagnetometerSensor Interface</span></a>
      <li>
       <a href="#magnetometer-sensor-reading-interface"><span class="secno">5.2</span> <span class="content">The MagnetometerSensorReading Interface</span></a>
       <ol class="toc">
        <li><a href="#magnetometer-sensor-reading-constructor"><span class="secno">5.2.1</span> <span class="content">The MagnetometerSensorReading constructor</span></a>
        <li><a href="#magnetometer-sensor-reading-attribute"><span class="secno">5.2.2</span> <span class="content">The MagnetometerSensorReading attributes</span></a>
       </ol>
     </ol>
    <li><a href="#limitations-magnetometer"><span class="secno">6</span> <span class="content">Limitations of Magnetometer Sensors</span></a>
    <li><a href="#compass"><span class="secno">7</span> <span class="content">Compass Heading Using Magnetometers</span></a>
    <li><a href="#acknowledgements"><span class="secno">8</span> <span class="content">Acknowledgements</span></a>
    <li><a href="#conformance"><span class="secno">9</span> <span class="content">Conformance</span></a>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#intro"></a></h2>
   <p>The Magnetometer Sensor extends the Generic Sensor API <a data-link-type="biblio" href="#biblio-generic-sensor">[GENERIC-SENSOR]</a> to provide information about the <a data-link-type="dfn" href="#geomagnetic-field" id="ref-for-geomagnetic-field-1">geomagnetic field</a> as detected by the device’s primary magnetometer sensor.
The magnetometer sensor measures the ambient <a data-link-type="dfn" href="#geomagnetic-field" id="ref-for-geomagnetic-field-2">geomagnetic field</a> for all three
physical axes (x, y, z) in μT (micro Tesla).</p>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="geomagnetic-field">Geomagnetic field</dfn> is defined as the magnetic force field that surrounds the Earth.
It is attributed to the combined effects of the planetary rotation and the movement of molten iron in the Earth’s core.</p>
   <p>A magnetoresistive component (permalloy) is one which changes resistance in proportion to the strength of a magnetic field along its axis.
The 3 axis magnetometer usually found in mobile phones, have 3 such components oriented such that each one is orthogonal to the other two,
one each in the X, Y and Z directions in the device’s <a data-link-type="dfn" href="#local-coordinate-system" id="ref-for-local-coordinate-system-1">local coordinate system</a>.
Each individual magnetoresistive element senses only the component of the magnetic field parallel to the element axis and ignores field components orthogonal to the element axis.</p>
   <h2 class="heading settled" data-level="2" id="examples"><span class="secno">2. </span><span class="content">Examples</span><a class="self-link" href="#examples"></a></h2>
   <div class="example" id="example-6f60a4ba">
    <a class="self-link" href="#example-6f60a4ba"></a> 
<pre class="highlight"><span></span><span class="kd">let</span> <span class="nx">sensor</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MagnetometerSensor</span><span class="p">();</span>
<span class="nx">sensor</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>

<span class="nx">sensor</span><span class="p">.</span><span class="nx">onchange</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Magnetic field along the X-axis "</span> <span class="o">+</span> <span class="nx">event</span><span class="p">.</span><span class="nx">reading</span><span class="p">.</span><span class="nx">magneticFieldX</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Magnetic field along the Y-axis "</span> <span class="o">+</span> <span class="nx">event</span><span class="p">.</span><span class="nx">reading</span><span class="p">.</span><span class="nx">magneticFieldY</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Magnetic field along the Z-axis "</span> <span class="o">+</span> <span class="nx">event</span><span class="p">.</span><span class="nx">reading</span><span class="p">.</span><span class="nx">magneticFieldZ</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">sensor</span><span class="p">.</span><span class="nx">onerror</span> <span class="o">=</span> <span class="nx">event</span> <span class="o">=></span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">error</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
</pre>
   </div>
   <h2 class="heading settled" data-level="3" id="security-and-privacy"><span class="secno">3. </span><span class="content">Security and Privacy Considerations</span><a class="self-link" href="#security-and-privacy"></a></h2>
   <p>There are no specific security and privacy considerations
beyond those described in the Generic Sensor API <a data-link-type="biblio" href="#biblio-generic-sensor">[GENERIC-SENSOR]</a>.</p>
   <h2 class="heading settled" data-level="4" id="model"><span class="secno">4. </span><span class="content">Model</span><a class="self-link" href="#model"></a></h2>
   <p>The Magnetometer Sensor’s associated <a data-link-type="dfn" href="https://w3c.github.io/sensors#sensor-subclass">Sensor subclass</a> is the <code class="idl"><a data-link-type="idl" href="#magnetometersensor" id="ref-for-magnetometersensor-1">MagnetometerSensor</a></code> class.</p>
   <p>The Magnetometer Sensor’s associated <a data-link-type="dfn" href="https://w3c.github.io/sensors#sensorreading-subclass">SensorReading subclass</a> is the <code class="idl"><a data-link-type="idl" href="#magnetometersensorreading" id="ref-for-magnetometersensorreading-1">MagnetometerSensorReading</a></code> class.</p>
   <p>The Magnetometer Sensor has a <a data-link-type="dfn" href="https://w3c.github.io/sensors#default-sensor">default sensor</a>,
which is the device’s main magnetometer sensor.</p>
   <p>The Magnetometer Sensor has a single <a data-link-type="dfn" href="https://w3c.github.io/sensors#supported-reporting-modes">supported reporting mode</a> which is "<a data-link-type="dfn" href="https://w3c.github.io/sensors#auto">auto</a>".</p>
   <p>The Magnetometer Sensor’s <a data-link-type="dfn" href="https://w3c.github.io/permissions/#idl-def-Permission">permission</a> name is <code>"magnetometer"</code>.
It has no <a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-associated-permissiondescriptor">associated PermissionDescriptor</a>.</p>
   <p>The Magnetometer Sensor has an associated abstract operation
to <dfn data-dfn-type="dfn" data-noexport="" id="retrieve-the-sensor-permission">retrieve the sensor permission<a class="self-link" href="#retrieve-the-sensor-permission"></a></dfn> which
must simply return a <a data-link-type="dfn" href="https://w3c.github.io/permissions/#idl-def-Permission">permission</a> whose name is "magnetometer".</p>
   <p>The Magnetometer Sensor has an associated abstract operation
to <dfn data-dfn-type="dfn" data-lt="Construct SensorReading Object" data-noexport="" id="construct-sensorreading-object">construct a SensorReading object<a class="self-link" href="#construct-sensorreading-object"></a></dfn> which creates a new <code class="idl"><a data-link-type="idl" href="#magnetometersensorreading" id="ref-for-magnetometersensorreading-2">MagnetometerSensorReading</a></code> object and sets each of its <a class="idl-code" data-link-type="attribute" href="#dom-magnetometersensorreading-magneticfieldx" id="ref-for-dom-magnetometersensorreading-magneticfieldx-1">magneticFieldX</a>, <a class="idl-code" data-link-type="attribute" href="#dom-magnetometersensorreading-magneticfieldy" id="ref-for-dom-magnetometersensorreading-magneticfieldy-1">magneticFieldY</a> and <a class="idl-code" data-link-type="attribute" href="#dom-magnetometersensorreading-magneticfieldz" id="ref-for-dom-magnetometersensorreading-magneticfieldz-1">magneticFieldZ</a> attributes to zero.</p>
   <p>The <code class="idl"><a data-link-type="idl" href="#magnetometersensorreading" id="ref-for-magnetometersensorreading-3">MagnetometerSensorReading</a></code>'s attribute values must be in μT (micro Tesla),
expressed in a three-dimentional Cartesian <a data-link-type="dfn" href="#local-coordinate-system" id="ref-for-local-coordinate-system-2">local coordinate system</a> defined by the device.</p>
   <p>The sign of the <a data-link-type="dfn" href="#geomagnetic-field" id="ref-for-geomagnetic-field-3">geomagnetic field</a> values must be according to the
right-hand convention in a <a data-link-type="dfn" href="#local-coordinate-system" id="ref-for-local-coordinate-system-3">local coordinate system</a> defined by the device.</p>
   <p class="note" role="note">Note: The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="local-coordinate-system">local coordinate system</dfn> of a mobile device is usually defined relative to
the device’s screen when the device in its default orientation (see figure below).</p>
   <p><img alt="Magnetometer coordinate system." src="magnetometer_coordinate_system.png" srcset="magnetometer_coordinate_system.svg"></p>
   <h2 class="heading settled" data-level="5" id="api"><span class="secno">5. </span><span class="content">API</span><a class="self-link" href="#api"></a></h2>
   <h3 class="heading settled" data-level="5.1" id="magnetometer-sensor-interface"><span class="secno">5.1. </span><span class="content">The MagnetometerSensor Interface</span><a class="self-link" href="#magnetometer-sensor-interface"></a></h3>
<pre class="idl highlight def">[<dfn class="nv idl-code" data-dfn-for="MagnetometerSensor" data-dfn-type="constructor" data-export="" data-lt="MagnetometerSensor(sensorOptions)|MagnetometerSensor()" id="dom-magnetometersensor-magnetometersensor">Constructor<a class="self-link" href="#dom-magnetometersensor-magnetometersensor"></a></dfn>(<span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="https://www.w3.org/TR/generic-sensor/#dictdef-sensoroptions">SensorOptions</a> <dfn class="nv idl-code" data-dfn-for="MagnetometerSensor/MagnetometerSensor(sensorOptions)" data-dfn-type="argument" data-export="" id="dom-magnetometersensor-magnetometersensor-sensoroptions-sensoroptions">sensorOptions<a class="self-link" href="#dom-magnetometersensor-magnetometersensor-sensoroptions-sensoroptions"></a></dfn>)]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="magnetometersensor">MagnetometerSensor</dfn> : <a class="n" data-link-type="idl-name" href="https://www.w3.org/TR/generic-sensor/#sensor">Sensor</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#magnetometersensorreading" id="ref-for-magnetometersensorreading-4">MagnetometerSensorReading</a>? <dfn class="nv idl-code" data-dfn-for="MagnetometerSensor" data-dfn-type="attribute" data-export="" data-readonly="" data-type="MagnetometerSensorReading?" id="dom-magnetometersensor-reading">reading<a class="self-link" href="#dom-magnetometersensor-reading"></a></dfn>;
};
</pre>
   <p>To <dfn data-dfn-type="dfn" data-noexport="" id="construct-an-magnetometersensor-object">Construct an MagnetometerSensor Object<a class="self-link" href="#construct-an-magnetometersensor-object"></a></dfn> the user agent must invoke the <a data-link-type="dfn" href="https://w3c.github.io/sensors#construct-sensor-object">construct a Sensor object</a> abstract operation.</p>
   <h3 class="heading settled" data-level="5.2" id="magnetometer-sensor-reading-interface"><span class="secno">5.2. </span><span class="content">The MagnetometerSensorReading Interface</span><a class="self-link" href="#magnetometer-sensor-reading-interface"></a></h3>
<pre class="idl highlight def">[<dfn class="nv idl-code" data-dfn-for="MagnetometerSensorReading" data-dfn-type="constructor" data-export="" data-lt="MagnetometerSensorReading(magnetometerSensorReadingInit)" id="dom-magnetometersensorreading-magnetometersensorreading">Constructor<a class="self-link" href="#dom-magnetometersensorreading-magnetometersensorreading"></a></dfn>(<a class="n" data-link-type="idl-name" href="#dictdef-magnetometersensorreadinginit" id="ref-for-dictdef-magnetometersensorreadinginit-1">MagnetometerSensorReadingInit</a> <dfn class="nv idl-code" data-dfn-for="MagnetometerSensorReading/MagnetometerSensorReading(magnetometerSensorReadingInit)" data-dfn-type="argument" data-export="" id="dom-magnetometersensorreading-magnetometersensorreading-magnetometersensorreadinginit-magnetometersensorreadinginit">magnetometerSensorReadingInit<a class="self-link" href="#dom-magnetometersensorreading-magnetometersensorreading-magnetometersensorreadinginit-magnetometersensorreadinginit"></a></dfn>)]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="magnetometersensorreading">MagnetometerSensorReading</dfn> : <a class="n" data-link-type="idl-name" href="https://www.w3.org/TR/generic-sensor/#sensorreading">SensorReading</a> {
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">double</span> <dfn class="nv dfn-paneled idl-code" data-dfn-for="MagnetometerSensorReading" data-dfn-type="attribute" data-export="" data-readonly="" data-type="double" id="dom-magnetometersensorreading-magneticfieldx">magneticFieldX</dfn>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">double</span> <dfn class="nv dfn-paneled idl-code" data-dfn-for="MagnetometerSensorReading" data-dfn-type="attribute" data-export="" data-readonly="" data-type="double" id="dom-magnetometersensorreading-magneticfieldy">magneticFieldY</dfn>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">double</span> <dfn class="nv dfn-paneled idl-code" data-dfn-for="MagnetometerSensorReading" data-dfn-type="attribute" data-export="" data-readonly="" data-type="double" id="dom-magnetometersensorreading-magneticfieldz">magneticFieldZ</dfn>;
};

<span class="kt">dictionary</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-magnetometersensorreadinginit">MagnetometerSensorReadingInit</dfn> {
  <span class="kt">double</span> <dfn class="nv idl-code" data-default="0" data-dfn-for="MagnetometerSensorReadingInit" data-dfn-type="dict-member" data-export="" data-type="double " id="dom-magnetometersensorreadinginit-magneticfieldx">magneticFieldX<a class="self-link" href="#dom-magnetometersensorreadinginit-magneticfieldx"></a></dfn> = 0;
  <span class="kt">double</span> <dfn class="nv idl-code" data-default="0" data-dfn-for="MagnetometerSensorReadingInit" data-dfn-type="dict-member" data-export="" data-type="double " id="dom-magnetometersensorreadinginit-magneticfieldy">magneticFieldY<a class="self-link" href="#dom-magnetometersensorreadinginit-magneticfieldy"></a></dfn> = 0;
  <span class="kt">double</span> <dfn class="nv idl-code" data-default="0" data-dfn-for="MagnetometerSensorReadingInit" data-dfn-type="dict-member" data-export="" data-type="double " id="dom-magnetometersensorreadinginit-magneticfieldz">magneticFieldZ<a class="self-link" href="#dom-magnetometersensorreadinginit-magneticfieldz"></a></dfn> = 0;
};
</pre>
   <h4 class="heading settled" data-level="5.2.1" id="magnetometer-sensor-reading-constructor"><span class="secno">5.2.1. </span><span class="content">The MagnetometerSensorReading constructor</span><a class="self-link" href="#magnetometer-sensor-reading-constructor"></a></h4>
   <p>The MagnetometerSensorReading constructor accepts <code class="idl"><a data-link-type="idl" href="#dictdef-magnetometersensorreadinginit" id="ref-for-dictdef-magnetometersensorreadinginit-2">MagnetometerSensorReadingInit</a></code> dictionary that is used for initialization of <code class="idl"><a data-link-type="idl" href="#magnetometersensorreading" id="ref-for-magnetometersensorreading-5">MagnetometerSensorReading</a></code> attributes.</p>
   <h4 class="heading settled" data-level="5.2.2" id="magnetometer-sensor-reading-attribute"><span class="secno">5.2.2. </span><span class="content">The MagnetometerSensorReading attributes</span><a class="self-link" href="#magnetometer-sensor-reading-attribute"></a></h4>
   <p>The <a class="idl-code" data-link-type="attribute" href="#dom-magnetometersensorreading-magneticfieldx" id="ref-for-dom-magnetometersensorreading-magneticfieldx-2">magneticFieldX</a> attribute of the <code class="idl"><a data-link-type="idl" href="#magnetometersensorreading" id="ref-for-magnetometersensorreading-6">MagnetometerSensorReading</a></code> interface represents represents the <a data-link-type="dfn" href="#geomagnetic-field" id="ref-for-geomagnetic-field-4">geomagnetic field</a> around X-axis.</p>
   <p>The <a class="idl-code" data-link-type="attribute" href="#dom-magnetometersensorreading-magneticfieldy" id="ref-for-dom-magnetometersensorreading-magneticfieldy-2">magneticFieldY</a> attribute of the <code class="idl"><a data-link-type="idl" href="#magnetometersensorreading" id="ref-for-magnetometersensorreading-7">MagnetometerSensorReading</a></code> interface represents represents the <a data-link-type="dfn" href="#geomagnetic-field" id="ref-for-geomagnetic-field-5">geomagnetic field</a> around Y-axis.</p>
   <p>The <a class="idl-code" data-link-type="attribute" href="#dom-magnetometersensorreading-magneticfieldz" id="ref-for-dom-magnetometersensorreading-magneticfieldz-2">magneticFieldZ</a> attribute of the <code class="idl"><a data-link-type="idl" href="#magnetometersensorreading" id="ref-for-magnetometersensorreading-8">MagnetometerSensorReading</a></code> interface represents represents the <a data-link-type="dfn" href="#geomagnetic-field" id="ref-for-geomagnetic-field-6">geomagnetic field</a> around Z-axis.</p>
   <h2 class="heading settled" data-level="6" id="limitations-magnetometer"><span class="secno">6. </span><span class="content">Limitations of Magnetometer Sensors</span><a class="self-link" href="#limitations-magnetometer"></a></h2>
   <p><em>This section is non-normative</em>.</p>
   <p>The direction and magnitude of the Earth’s field changes with location, latitude in particular. For example,
the magnitude is lowest near the equator and highest near the poles.
Some hard-iron interference, meaning presence of permanent magnets (e.g. magnets in the speaker of a phone) in the vicinity of the sensor
also affects the accuracy of the reading.
Presence of electronic items, laptops, batteries, etc also contribute to the soft-iron interference.
Flight Mode option in mobile phones might help in decreasing the electro magnetic interference.</p>
   <p>In addition to the above spatial variations of the <a data-link-type="dfn" href="#geomagnetic-field" id="ref-for-geomagnetic-field-7">geomagnetic field</a>, time based variations,
like solar winds or magnetic storms, also distort the magnetosphere or external magnetic field of the earth.</p>
   <h2 class="heading settled" data-level="7" id="compass"><span class="secno">7. </span><span class="content">Compass Heading Using Magnetometers</span><a class="self-link" href="#compass"></a></h2>
   <p>Compasses, instruments that align themselves with the magnetic poles of the Earth, have been used in navigation for centuries.
The earth’s rotational axis defines the geographic north and south poles that we use for
map references. It turns out that there is a discrepancy of around 11.5 degrees (around 1000 miles) between the geographic poles and the
magnetic poles. <a data-link-type="dfn" href="#declination-angle" id="ref-for-declination-angle-1">Declination angle</a> is applied to the magnetic direction to correct for this situation.</p>
   <p>If the device is always level to the earth’s surface, compass heading can be determined by using just the <code class="idl"><a data-link-type="idl" href="#dom-magnetometersensorreading-magneticfieldx" id="ref-for-dom-magnetometersensorreading-magneticfieldx-3">magneticFieldX</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-magnetometersensorreading-magneticfieldy" id="ref-for-dom-magnetometersensorreading-magneticfieldy-3">magneticFieldY</a></code> component of the earth’s magnetic field, that
is, the directions planar with the earth’s surface.
To determine geographic north (or true north) heading, add the appropriate <a data-link-type="dfn" href="#declination-angle" id="ref-for-declination-angle-2">declination angle</a>.</p>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="magnetic-declination">Magnetic declination</dfn> or <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="declination-angle">declination angle</dfn> is the angle on the horizontal plane between magnetic north and the true north and depends on the position on the Earth’s surface, and changes over time.
By convention, declination is positive when magnetic north is east of true north, and negative when it is to the west. You can get real time value for <a data-link-type="dfn" href="#magnetic-declination" id="ref-for-magnetic-declination-1">magnetic declination</a> e.g. using the <a href="http://www.ngdc.noaa.gov/geomag-web/calculators/declinationHelp">Magnetic declination calculator</a> provided by the National Oceanic and Atmospheric Administration (NOAA).</p>
   <p>Magnetic north calculation is simple:</p>
   <div class="example" id="example-ba2590b8">
    <a class="self-link" href="#example-ba2590b8"></a> 
<pre class="highlight"><span></span><span class="kd">var</span> <span class="nx">headingDegrees</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atan2</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">reading</span><span class="p">.</span><span class="nx">magneticFieldY</span><span class="p">,</span>
                                <span class="nx">event</span><span class="p">.</span><span class="nx">reading</span><span class="p">.</span><span class="nx">magneticFieldX</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">180</span> <span class="o">/</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Heading in degrees: '</span> <span class="o">+</span> <span class="nx">headingDegrees</span><span class="p">);</span>
</pre>
   </div>
   <p>To get geographic north (or true north) that considers the <a data-link-type="dfn" href="#magnetic-declination" id="ref-for-magnetic-declination-2">magnetic declination</a> at the given latitude and longitude,
further work is required:</p>
   <div class="example" id="example-e305dc8d">
    <a class="self-link" href="#example-e305dc8d"></a> 
<pre class="highlight"><span></span><span class="c1">// First, get the latitude and longitude (omitted for brevity).</span>
<span class="kd">var</span> <span class="nx">latitude</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">longitude</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="c1">// Then, get the magnetic declination using your favorite web service.</span>
<span class="kd">var</span> <span class="nx">base</span> <span class="o">=</span> <span class="s1">'http://www.ngdc.noaa.gov/geomag-web/calculators/calculateDeclination'</span><span class="p">;</span>
<span class="nx">fetch</span><span class="p">(</span><span class="nx">base</span> <span class="o">+</span> <span class="s1">'?lat1='</span> <span class="o">+</span> <span class="nx">latitude</span> <span class="o">+</span> <span class="s1">'&amp;lon1='</span> <span class="o">+</span> <span class="nx">longitude</span> <span class="o">+</span> <span class="s1">'&amp;resultFormat=csv'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=></span> <span class="nx">response</span><span class="p">.</span><span class="nx">text</span><span class="p">()).</span><span class="nx">then</span><span class="p">(</span><span class="nx">text</span> <span class="o">=></span> <span class="p">{</span> 
    <span class="kd">var</span> <span class="nx">declinationDegrees</span> <span class="o">=</span>
        <span class="nb">parseFloat</span><span class="p">(</span><span class="nx">text</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^#.*$/gm</span><span class="p">,</span> <span class="s1">''</span><span class="p">).</span><span class="nx">trim</span><span class="p">().</span><span class="nx">split</span><span class="p">(</span><span class="s1">','</span><span class="p">)[</span><span class="mi">4</span><span class="p">]);</span>
    <span class="c1">// Compensate for the magnetic declination to get the true north.</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'True heading in degrees: '</span> <span class="o">+</span> <span class="p">(</span><span class="nx">headingDegrees</span> <span class="o">+</span> <span class="nx">declinationDegrees</span><span class="p">));</span>
<span class="p">});</span>
</pre>
   </div>
   <p>If the device is not level to the Earth’s surface, we need to apply various
tilt compensation techniques for which we need a 3-axis accelerometer.
A specification for orientation sensor, which is a fusion of the accelerometer
and magnetometer sensors, is required to implement this particular use case.</p>
   <h2 class="heading settled" data-level="8" id="acknowledgements"><span class="secno">8. </span><span class="content">Acknowledgements</span><a class="self-link" href="#acknowledgements"></a></h2>
   <p>Tobie Langel for the work on Generic Sensor API.</p>
   <h2 class="heading settled" data-level="9" id="conformance"><span class="secno">9. </span><span class="content">Conformance</span><a class="self-link" href="#conformance"></a></h2>
   <p>Conformance requirements are expressed with a combination of
descriptive assertions and RFC 2119 terminology. The key words "MUST",
"MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT",
"RECOMMENDED", "MAY", and "OPTIONAL" in the normative parts of this
document are to be interpreted as described in RFC 2119.
However, for readability, these words do not appear in all uppercase
letters in this specification.</p>
   <p>All of the text of this specification is normative except sections
explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a></p>
   <p>A <dfn data-dfn-type="dfn" data-noexport="" id="conformant-user-agent">conformant user agent<a class="self-link" href="#conformant-user-agent"></a></dfn> must implement all the requirements
listed in this specification that are applicable to user agents.</p>
   <p>The IDL fragments in this specification must be interpreted as required for
conforming IDL fragments, as described in the Web IDL specification. <a data-link-type="biblio" href="#biblio-webidl">[WEBIDL]</a></p>
  </main>
<script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#conformant-user-agent">conformant user agent</a><span>, in §9</span>
   <li><a href="#construct-an-magnetometersensor-object">Construct an MagnetometerSensor Object</a><span>, in §5.1</span>
   <li><a href="#construct-sensorreading-object">Construct SensorReading Object</a><span>, in §4</span>
   <li><a href="#declination-angle">declination angle</a><span>, in §7</span>
   <li><a href="#geomagnetic-field">Geomagnetic field</a><span>, in §1</span>
   <li><a href="#local-coordinate-system">local coordinate system</a><span>, in §4</span>
   <li><a href="#magnetic-declination">Magnetic declination</a><span>, in §7</span>
   <li>
    magneticFieldX
    <ul>
     <li><a href="#dom-magnetometersensorreading-magneticfieldx">attribute for MagnetometerSensorReading</a><span>, in §5.2</span>
     <li><a href="#dom-magnetometersensorreadinginit-magneticfieldx">dict-member for MagnetometerSensorReadingInit</a><span>, in §5.2</span>
    </ul>
   <li>
    magneticFieldY
    <ul>
     <li><a href="#dom-magnetometersensorreading-magneticfieldy">attribute for MagnetometerSensorReading</a><span>, in §5.2</span>
     <li><a href="#dom-magnetometersensorreadinginit-magneticfieldy">dict-member for MagnetometerSensorReadingInit</a><span>, in §5.2</span>
    </ul>
   <li>
    magneticFieldZ
    <ul>
     <li><a href="#dom-magnetometersensorreading-magneticfieldz">attribute for MagnetometerSensorReading</a><span>, in §5.2</span>
     <li><a href="#dom-magnetometersensorreadinginit-magneticfieldz">dict-member for MagnetometerSensorReadingInit</a><span>, in §5.2</span>
    </ul>
   <li><a href="#dom-magnetometersensor-magnetometersensor">MagnetometerSensor()</a><span>, in §5.1</span>
   <li><a href="#magnetometersensor">MagnetometerSensor</a><span>, in §5.1</span>
   <li><a href="#magnetometersensorreading">MagnetometerSensorReading</a><span>, in §5.2</span>
   <li><a href="#dictdef-magnetometersensorreadinginit">MagnetometerSensorReadingInit</a><span>, in §5.2</span>
   <li><a href="#dom-magnetometersensorreading-magnetometersensorreading">MagnetometerSensorReading(magnetometerSensorReadingInit)</a><span>, in §5.2</span>
   <li><a href="#dom-magnetometersensor-magnetometersensor">MagnetometerSensor(sensorOptions)</a><span>, in §5.1</span>
   <li><a href="#dom-magnetometersensor-reading">reading</a><span>, in §5.1</span>
   <li><a href="#retrieve-the-sensor-permission">retrieve the sensor permission</a><span>, in §4</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[GENERIC-SENSOR]</a> defines the following terms:
    <ul>
     <li><a href="https://w3c.github.io/sensors#auto">auto</a>
     <li><a href="https://w3c.github.io/sensors#construct-sensor-object">construct a sensor object</a>
     <li><a href="https://w3c.github.io/sensors#default-sensor">default sensor</a>
     <li><a href="https://w3c.github.io/sensors#sensor-subclass">sensor subclass</a>
     <li><a href="https://w3c.github.io/sensors#sensorreading-subclass">sensorreading subclass</a>
     <li><a href="https://w3c.github.io/sensors#supported-reporting-modes">supported reporting mode</a>
    </ul>
   <li>
    <a data-link-type="biblio">[permissions]</a> defines the following terms:
    <ul>
     <li><a href="https://w3c.github.io/permissions/#dfn-associated-permissiondescriptor">associated permissiondescriptor</a>
     <li><a href="https://w3c.github.io/permissions/#idl-def-Permission">permission</a>
    </ul>
   <li>
    <a data-link-type="biblio">[GENERIC-SENSOR]</a> defines the following terms:
    <ul>
     <li><a href="https://www.w3.org/TR/generic-sensor/#sensor">Sensor</a>
     <li><a href="https://www.w3.org/TR/generic-sensor/#dictdef-sensoroptions">SensorOptions</a>
     <li><a href="https://www.w3.org/TR/generic-sensor/#sensorreading">SensorReading</a>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-generic-sensor">[GENERIC-SENSOR]
   <dd>Tobie Langel; Rick Waldron. <a href="https://www.w3.org/TR/generic-sensor/">Generic Sensor API</a>. 24 March 2016. WD. URL: <a href="https://www.w3.org/TR/generic-sensor/">https://www.w3.org/TR/generic-sensor/</a>
   <dt id="biblio-permissions">[PERMISSIONS]
   <dd>Mounir Lamouri; Marcos Caceres. <a href="https://www.w3.org/TR/permissions/">The Permissions API</a>. 7 April 2015. WD. URL: <a href="https://www.w3.org/TR/permissions/">https://www.w3.org/TR/permissions/</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
   <dt id="biblio-webidl">[WEBIDL]
   <dd>Cameron McCormack; Boris Zbarsky. <a href="https://www.w3.org/TR/WebIDL-1/">WebIDL Level 1</a>. 8 March 2016. CR. URL: <a href="https://www.w3.org/TR/WebIDL-1/">https://www.w3.org/TR/WebIDL-1/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl def">[<a class="nv" href="#dom-magnetometersensor-magnetometersensor">Constructor</a>(<span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="https://www.w3.org/TR/generic-sensor/#dictdef-sensoroptions">SensorOptions</a> <a class="nv" href="#dom-magnetometersensor-magnetometersensor-sensoroptions-sensoroptions">sensorOptions</a>)]
<span class="kt">interface</span> <a class="nv" href="#magnetometersensor">MagnetometerSensor</a> : <a class="n" data-link-type="idl-name" href="https://www.w3.org/TR/generic-sensor/#sensor">Sensor</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#magnetometersensorreading">MagnetometerSensorReading</a>? <a class="nv" data-readonly="" data-type="MagnetometerSensorReading?" href="#dom-magnetometersensor-reading">reading</a>;
};

[<a class="nv" href="#dom-magnetometersensorreading-magnetometersensorreading">Constructor</a>(<a class="n" data-link-type="idl-name" href="#dictdef-magnetometersensorreadinginit">MagnetometerSensorReadingInit</a> <a class="nv" href="#dom-magnetometersensorreading-magnetometersensorreading-magnetometersensorreadinginit-magnetometersensorreadinginit">magnetometerSensorReadingInit</a>)]
<span class="kt">interface</span> <a class="nv" href="#magnetometersensorreading">MagnetometerSensorReading</a> : <a class="n" data-link-type="idl-name" href="https://www.w3.org/TR/generic-sensor/#sensorreading">SensorReading</a> {
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">double</span> <a class="nv" data-readonly="" data-type="double" href="#dom-magnetometersensorreading-magneticfieldx">magneticFieldX</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">double</span> <a class="nv" data-readonly="" data-type="double" href="#dom-magnetometersensorreading-magneticfieldy">magneticFieldY</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">double</span> <a class="nv" data-readonly="" data-type="double" href="#dom-magnetometersensorreading-magneticfieldz">magneticFieldZ</a>;
};

<span class="kt">dictionary</span> <a class="nv" href="#dictdef-magnetometersensorreadinginit">MagnetometerSensorReadingInit</a> {
  <span class="kt">double</span> <a class="nv" data-default="0" data-type="double " href="#dom-magnetometersensorreadinginit-magneticfieldx">magneticFieldX</a> = 0;
  <span class="kt">double</span> <a class="nv" data-default="0" data-type="double " href="#dom-magnetometersensorreadinginit-magneticfieldy">magneticFieldY</a> = 0;
  <span class="kt">double</span> <a class="nv" data-default="0" data-type="double " href="#dom-magnetometersensorreadinginit-magneticfieldz">magneticFieldZ</a> = 0;
};

</pre>
  <aside class="dfn-panel" data-for="geomagnetic-field">
   <b><a href="#geomagnetic-field">#geomagnetic-field</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-geomagnetic-field-1">1. Introduction</a> <a href="#ref-for-geomagnetic-field-2">(2)</a>
    <li><a href="#ref-for-geomagnetic-field-3">4. Model</a>
    <li><a href="#ref-for-geomagnetic-field-4">5.2.2. The MagnetometerSensorReading attributes</a> <a href="#ref-for-geomagnetic-field-5">(2)</a> <a href="#ref-for-geomagnetic-field-6">(3)</a>
    <li><a href="#ref-for-geomagnetic-field-7">6. Limitations of Magnetometer Sensors</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="local-coordinate-system">
   <b><a href="#local-coordinate-system">#local-coordinate-system</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-local-coordinate-system-1">1. Introduction</a>
    <li><a href="#ref-for-local-coordinate-system-2">4. Model</a> <a href="#ref-for-local-coordinate-system-3">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="magnetometersensor">
   <b><a href="#magnetometersensor">#magnetometersensor</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-magnetometersensor-1">4. Model</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="magnetometersensorreading">
   <b><a href="#magnetometersensorreading">#magnetometersensorreading</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-magnetometersensorreading-1">4. Model</a> <a href="#ref-for-magnetometersensorreading-2">(2)</a> <a href="#ref-for-magnetometersensorreading-3">(3)</a>
    <li><a href="#ref-for-magnetometersensorreading-4">5.1. The MagnetometerSensor Interface</a>
    <li><a href="#ref-for-magnetometersensorreading-5">5.2.1. The MagnetometerSensorReading constructor</a>
    <li><a href="#ref-for-magnetometersensorreading-6">5.2.2. The MagnetometerSensorReading attributes</a> <a href="#ref-for-magnetometersensorreading-7">(2)</a> <a href="#ref-for-magnetometersensorreading-8">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-magnetometersensorreading-magneticfieldx">
   <b><a href="#dom-magnetometersensorreading-magneticfieldx">#dom-magnetometersensorreading-magneticfieldx</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-magnetometersensorreading-magneticfieldx-1">4. Model</a>
    <li><a href="#ref-for-dom-magnetometersensorreading-magneticfieldx-2">5.2.2. The MagnetometerSensorReading attributes</a>
    <li><a href="#ref-for-dom-magnetometersensorreading-magneticfieldx-3">7. Compass Heading Using Magnetometers</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-magnetometersensorreading-magneticfieldy">
   <b><a href="#dom-magnetometersensorreading-magneticfieldy">#dom-magnetometersensorreading-magneticfieldy</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-magnetometersensorreading-magneticfieldy-1">4. Model</a>
    <li><a href="#ref-for-dom-magnetometersensorreading-magneticfieldy-2">5.2.2. The MagnetometerSensorReading attributes</a>
    <li><a href="#ref-for-dom-magnetometersensorreading-magneticfieldy-3">7. Compass Heading Using Magnetometers</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-magnetometersensorreading-magneticfieldz">
   <b><a href="#dom-magnetometersensorreading-magneticfieldz">#dom-magnetometersensorreading-magneticfieldz</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-magnetometersensorreading-magneticfieldz-1">4. Model</a>
    <li><a href="#ref-for-dom-magnetometersensorreading-magneticfieldz-2">5.2.2. The MagnetometerSensorReading attributes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-magnetometersensorreadinginit">
   <b><a href="#dictdef-magnetometersensorreadinginit">#dictdef-magnetometersensorreadinginit</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-magnetometersensorreadinginit-1">5.2. The MagnetometerSensorReading Interface</a>
    <li><a href="#ref-for-dictdef-magnetometersensorreadinginit-2">5.2.1. The MagnetometerSensorReading constructor</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="magnetic-declination">
   <b><a href="#magnetic-declination">#magnetic-declination</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-magnetic-declination-1">7. Compass Heading Using Magnetometers</a> <a href="#ref-for-magnetic-declination-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="declination-angle">
   <b><a href="#declination-angle">#declination-angle</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-declination-angle-1">7. Compass Heading Using Magnetometers</a> <a href="#ref-for-declination-angle-2">(2)</a>
   </ul>
  </aside>
<script>/* script-dfn-panel */

        document.body.addEventListener("click", function(e) {
            var queryAll = function(sel) { return [].slice.call(document.querySelectorAll(sel)); }
            // Find the dfn element or panel, if any, that was clicked on.
            var el = e.target;
            var target;
            var hitALink = false;
            while(el.parentElement) {
                if(el.tagName == "A") {
                    // Clicking on a link in a <dfn> shouldn't summon the panel
                    hitALink = true;
                }
                if(el.classList.contains("dfn-paneled")) {
                    target = "dfn";
                    break;
                }
                if(el.classList.contains("dfn-panel")) {
                    target = "dfn-panel";
                    break;
                }
                el = el.parentElement;
            }
            if(target != "dfn-panel") {
                // Turn off any currently "on" or "activated" panels.
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function(el){
                    el.classList.remove("on");
                    el.classList.remove("activated");
                });
            }
            if(target == "dfn" && !hitALink) {
                // open the panel
                var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
                if(dfnPanel) {
                    console.log(dfnPanel);
                    dfnPanel.classList.add("on");
                    var rect = el.getBoundingClientRect();
                    dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
                    dfnPanel.style.top = window.scrollY + rect.top + "px";
                    var panelRect = dfnPanel.getBoundingClientRect();
                    var panelWidth = panelRect.right - panelRect.left;
                    if(panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                        // Reposition, because the panel is overflowing
                        dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
                    }
                } else {
                    console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
                }
            } else if(target == "dfn-panel") {
                // Switch it to "activated" state, which pins it.
                el.classList.add("activated");
                el.style.left = null;
                el.style.top = null;
            }

        });
        </script>